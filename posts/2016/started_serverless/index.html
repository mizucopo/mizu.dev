<!doctype html><html lang=ja-jp class="bg-gradient-to-br from-slate-50 to-slate-100 font-sans"><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Serverless 始めてみました | みず ねっとわーくさーびす</title><style>body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.from-slate-50{--tw-gradient-from:#f8fafc}.to-slate-100{--tw-gradient-to:#f1f5f9}.sticky{position:sticky}.top-0{top:0}.z-50{z-index:50}.flex{display:flex}.min-h-screen{min-height:100vh}.flex-col{flex-direction:column}.flex-grow{flex-grow:1}.container{width:100%;margin-left:auto;margin-right:auto;padding-left:1rem;padding-right:1rem}@media(min-width:640px){.container{max-width:640px}}@media(min-width:768px){.container{max-width:768px}}@media(min-width:1024px){.container{max-width:1024px}}@media(min-width:1280px){.container{max-width:1280px}}</style><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel=stylesheet><link rel=preload href=/css/style.min.20b199a41b7ff6735757016967c60b251836d27f68d3807646ddf29bb132bc54.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/css/style.min.20b199a41b7ff6735757016967c60b251836d27f68d3807646ddf29bb132bc54.css></noscript><script src=https://cdn.tailwindcss.com></script><script src=/js/tailwind.config.min.f09cb688070824a4bf4af46911c6cd63117ede813825b2b03f1247993f61c1fa.js></script><meta name=description content="最近の流行りのサーバーレスなアプリケーションを作成してみようと、Serverless Framework を触ってみました。
基本的に、AWS Lambdaを活用したServerless Frameworkを触ってみる - Qiita の焼き直しです。
"><meta property="og:title" content="Serverless 始めてみました"><meta property="og:description" content="最近の流行りのサーバーレスなアプリケーションを作成してみようと、Serverless Framework を触ってみました。
基本的に、AWS Lambdaを活用したServerless Frameworkを触ってみる - Qiita の焼き直しです。
"><meta property="og:type" content="article"><meta property="og:url" content="https://mizu.dev/posts/2016/started_serverless/"><meta property="og:image" content="https://mizu.dev/posts/2016/started_serverless/0324_main_hu_5bf8d948e5aaa155.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mizu.dev/posts/2016/started_serverless/0324_main_hu_5bf8d948e5aaa155.webp"><meta name=twitter:site content="@mizu_copo"><meta name=twitter:creator content="@mizu_copo"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Serverless 始めてみました","datePublished":"2016-03-24T13:43:00\u002b09:00","dateModified":"2016-03-24T13:43:00\u002b09:00","author":{"@type":"Person","name":"みず ねっとわーくさーびす"},"publisher":{"@type":"Organization","name":"みず ねっとわーくさーびす"},"description":"最近の流行りのサーバーレスなアプリケーションを作成してみようと、Serverless Framework を触ってみました。\n基本的に、AWS Lambdaを活用したServerless Frameworkを触ってみる - Qiita の焼き直しです。\n","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/mizu.dev\/posts\/2016\/started_serverless\/"},"image":{"@type":"ImageObject","url":"https:\/\/mizu.dev\/posts\/2016\/started_serverless\/0324_main_hu_5bf8d948e5aaa155.webp"}}</script></head><body class="flex flex-col min-h-screen bg-slate-100 text-slate-700"><header class="sticky top-0 z-50 border-b border-slate-200/50 bg-white/80 backdrop-blur-xl text-slate-800 shadow-sm"><div class="container px-4 py-2 mx-auto sm:px-6 lg:px-8"><div class="flex items-center justify-between h-12"><div class=flex-shrink-0><a href=/ class="text-lg font-bold tracking-wide transition-colors duration-300 bg-gradient-to-r from-blue-800 via-sky-700 to-cyan-700 bg-clip-text text-transparent hover:from-blue-700 hover:via-sky-600 hover:to-cyan-600 sm:text-xl">みず ねっとわーくさーびす</a></div><div class="items-center hidden space-x-3 md:flex lg:space-x-5"><nav class="flex space-x-3 lg:space-x-5"><a href=/about class="px-3 py-2 text-base font-medium transition-colors duration-300 rounded-md text-slate-600 hover:text-blue-600 hover:bg-slate-100">About
</a><a href=/tags class="px-3 py-2 text-base font-medium transition-colors duration-300 rounded-md text-slate-600 hover:text-blue-600 hover:bg-slate-100">Tags</a></nav><button id=desktop-search-button aria-label=サイト内検索 class="p-2 transition-colors rounded-full text-slate-500 hover:text-blue-600 hover:bg-slate-100">
<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg></button></div><div class="flex items-center md:hidden"><button id=mobile-search-button aria-label=サイト内検索 class="p-2 transition-colors rounded-full text-slate-500 hover:text-blue-600 hover:bg-slate-100">
<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg>
</button>
<button id=mobile-menu-button aria-label=ナビゲーションメニュー aria-expanded=false class="inline-flex items-center justify-center p-2 ml-2 transition-colors rounded-md text-slate-500 hover:text-blue-600 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
<svg id="mobile-menu-open-icon" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
<svg id="mobile-menu-close-icon" class="hidden w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg></button></div></div></div><div id=mobile-menu class="hidden bg-white border-t border-slate-200 shadow-lg md:hidden"><nav class="px-2 pt-2 pb-3 space-y-1 sm:px-3"><div class=block><a href=/about class="px-3 py-2 text-base font-medium transition-colors duration-300 rounded-md text-slate-600 hover:text-blue-600 hover:bg-slate-100">About</a></div><div class=block><a href=/tags class="px-3 py-2 text-base font-medium transition-colors duration-300 rounded-md text-slate-600 hover:text-blue-600 hover:bg-slate-100">Tags</a></div></nav></div></header><div id=search-modal class="fixed inset-0 z-[100] flex items-center justify-center hidden p-4 bg-black bg-opacity-50 backdrop-blur-sm search-modal" role=dialog aria-modal=true aria-hidden=true aria-labelledby=search-modal-title><div id=search-modal-content class="w-full max-w-lg p-6 bg-white/90 backdrop-blur-xl rounded-2xl border border-white/30 shadow-2xl opacity-0 transition-all duration-300 ease-out scale-95" role=document><div class="flex items-center justify-between mb-4"><h2 id=search-modal-title class="text-xl font-semibold text-slate-800">サイト内検索</h2><button id=search-modal-close-button aria-label=検索モーダルを閉じる class="p-1 rounded-full text-slate-500 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
<svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg></button></div><form id=search-form role=search><label for=search-input class=sr-only>検索キーワード</label>
<input type=search id=search-input name=query placeholder=検索キーワードを入力... class="w-full px-4 py-3 mb-4 text-base border rounded-lg border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none" aria-describedby=search-help autocomplete=off required><div id=search-help class=sr-only>Googleを使用してサイト内を検索します</div><button type=submit class="w-full px-4 py-3 text-base font-semibold text-white transition-colors bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
検索</button></form></div></div><main class="container flex-grow px-4 py-8 mx-auto sm:px-6 lg:px-8"><article class="bg-white/70 backdrop-blur-md shadow-2xl rounded-2xl border border-white/30 overflow-hidden" itemscope itemtype=https://schema.org/Article><div class="p-6 md:p-8 lg:p-10"><header class=mb-6><h1 class="font-bold text-slate-900 mb-2 tracking-wide" itemprop=headline><a href=/posts/2016/started_serverless/ class="hover:text-sky-600 transition-colors duration-300">Serverless 始めてみました</a></h1><div class="text-sm text-slate-500 mb-3 flex items-center flex-wrap"><time datetime=2016-03-24T13:43:00+09:00 class=mr-2 itemprop=datePublished><svg class="inline-block h-4 w-4 mr-1 -mt-0.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M6 2A1 1 0 005 3v1H4A2 2 0 002 6v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3A1 1 0 006 2zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/></svg>
<span class=sr-only>投稿日:</span>
2016年3月24日
</time><span class=mr-2><svg class="inline-block h-4 w-4 mr-1 -mt-0.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12A1 1 0 109 6v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.415L11 9.586V6z" clip-rule="evenodd"/></svg>
<span class=sr-only>読了時間:</span>
3 min read
</span><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fmizu.dev%2fposts%2f2016%2fstarted_serverless%2f&text=Serverless%20%e5%a7%8b%e3%82%81%e3%81%a6%e3%81%bf%e3%81%be%e3%81%97%e3%81%9f" target=_blank rel="noopener noreferrer" class="inline-flex items-center text-slate-500 hover:text-sky-600 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 rounded" aria-label=この記事をXで共有する><svg class="inline-block h-4 w-4 mr-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.257 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
<span class="hidden sm:inline">POST</span></a></div><div class="flex flex-wrap gap-2 mt-3" role=list aria-label=タグ><a href=/tags/aws/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: AWS">#AWS
</a><a href=/tags/serverless-framework/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: Serverless Framework">#Serverless Framework</a></div></header><figure class="w-full mt-6 mb-16 rounded-lg overflow-hidden"><img src=/posts/2016/started_serverless/0324_main_hu_5bf8d948e5aaa155.webp alt="Cover image for Serverless 始めてみました" class="w-full h-auto object-cover" loading=lazy decoding=async itemprop=image width=800 height=600></figure><div class="content-area max-w-none mt-8 text-slate-700 leading-relaxed" itemprop=articleBody><p>最近の流行りのサーバーレスなアプリケーションを作成してみようと、Serverless Framework を触ってみました。</p><p>基本的に、<a href=http://qiita.com/susieyy/items/1c2af0ef7b88b742c37a target=_blank>AWS Lambdaを活用したServerless Frameworkを触ってみる - Qiita</a>
の焼き直しです。</p><h2 id=serverless-framework-とは>Serverless Framework とは</h2><ul><li><p><a href=https://github.com/serverless/serverless target=_blank>Severless Framework</a></p><p>Serverless Framework はサーバレスなアプリケーションサービスを構築するためのフレームワークで、AWSの各種サービスを相互活用して動作します。
AWS Lambdaを中心に添えた構成によりメンテナンス性とスケーラビリティがが高いサービスを構築することができます。</p></li></ul><p>とのことです。</p><h2 id=serverless-framework-のインストール>Serverless Framework のインストール</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ npm install -g serverless
</span></span></code></pre></div><p>今回利用するのは、<code>serverless@0.5.0</code>になります。</p><h2 id=プロジェクトの作成>プロジェクトの作成</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ serverless project create
</span></span><span style=display:flex><span> _______                             __
</span></span><span style=display:flex><span>|   _   .-----.----.--.--.-----.----|  .-----.-----.-----.
</span></span><span style=display:flex><span>|   |___|  -__|   _|  |  |  -__|   _|  |  -__|__ --|__ --|
</span></span><span style=display:flex><span>|____   |_____|__|  <span style=color:#ae81ff>\_</span>__/|_____|__| |__|_____|_____|_____|
</span></span><span style=display:flex><span>|   |   |             The Serverless Application Framework
</span></span><span style=display:flex><span>|       |                           serverless.com, v0.5.0
</span></span><span style=display:flex><span><span style=color:#e6db74>`</span>-------<span style=color:#960050;background-color:#1e0010>&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Serverless: Initializing Serverless Project...
</span></span><span style=display:flex><span>Serverless: Enter a name <span style=color:#66d9ef>for</span> this project:  <span style=color:#f92672>(</span>serverless-4y33cs<span style=color:#f92672>)</span> slssHello
</span></span><span style=display:flex><span>Serverless: Enter a new stage name <span style=color:#66d9ef>for</span> this project:  dev
</span></span><span style=display:flex><span>Serverless: For the <span style=color:#e6db74>&#34;dev&#34;</span> stage, <span style=color:#66d9ef>do</span> you want to use an existing Amazon Web Services profile or create a new one?
</span></span><span style=display:flex><span>  &gt; Existing Profile
</span></span><span style=display:flex><span>    Create A New Profile
</span></span><span style=display:flex><span>Serverless: Select a profile <span style=color:#66d9ef>for</span> your project:
</span></span><span style=display:flex><span>  &gt; default
</span></span><span style=display:flex><span>Serverless: Creating stage <span style=color:#e6db74>&#34;dev&#34;</span>...
</span></span><span style=display:flex><span>Serverless: Select a new region <span style=color:#66d9ef>for</span> your stage:
</span></span><span style=display:flex><span>  &gt; us-east-1
</span></span><span style=display:flex><span>    us-west-2
</span></span><span style=display:flex><span>    eu-west-1
</span></span><span style=display:flex><span>    eu-central-1
</span></span><span style=display:flex><span>    ap-northeast-1
</span></span><span style=display:flex><span>Serverless: Creating region <span style=color:#e6db74>&#34;us-east-1&#34;</span> in stage <span style=color:#e6db74>&#34;dev&#34;</span>...
</span></span><span style=display:flex><span>Serverless: Deploying resources to stage <span style=color:#e6db74>&#34;dev&#34;</span> in region <span style=color:#e6db74>&#34;us-east-1&#34;</span> via Cloudformation <span style=color:#f92672>(</span>~3 minutes<span style=color:#f92672>)</span>...
</span></span><span style=display:flex><span>Serverless: Successfully deployed <span style=color:#e6db74>&#34;dev&#34;</span> resources to <span style=color:#e6db74>&#34;us-east-1&#34;</span>
</span></span><span style=display:flex><span>Serverless: Successfully created region <span style=color:#e6db74>&#34;us-east-1&#34;</span> within stage <span style=color:#e6db74>&#34;dev&#34;</span>
</span></span><span style=display:flex><span>Serverless: Successfully created stage <span style=color:#e6db74>&#34;dev&#34;</span>
</span></span><span style=display:flex><span>Serverless: Successfully initialized project <span style=color:#e6db74>&#34;slssHello&#34;</span>
</span></span></code></pre></div><p>適当に下記設定にしてみました。</p><ul><li>Project<ul><li>slssHello<ul><li>lowerCamelCase が良いのかな。</li></ul></li></ul></li><li>Stage<ul><li>dev</li></ul></li><li>AWS Profile<ul><li>default<ul><li>~/.aws/credentials に設定されていたものを利用。</li></ul></li></ul></li><li>Region<ul><li>us-east-1</li></ul></li></ul><p>プロジェクト作成後、CloudFormationが実行されます。
その設定ファイルは、<code>s-resources-cf.json</code>ですね。</p><p><code>$ slss dash summary</code>を実行すると、サマリが表示されるようですね。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ slss dash summary
</span></span><span style=display:flex><span> _______                             __
</span></span><span style=display:flex><span>|   _   .-----.----.--.--.-----.----|  .-----.-----.-----.
</span></span><span style=display:flex><span>|   |___|  -__|   _|  |  |  -__|   _|  |  -__|__ --|__ --|
</span></span><span style=display:flex><span>|____   |_____|__|  <span style=color:#ae81ff>\_</span>__/|_____|__| |__|_____|_____|_____|
</span></span><span style=display:flex><span>|   |   |             The Serverless Application Framework
</span></span><span style=display:flex><span>|       |                           serverless.com, v0.5.0
</span></span><span style=display:flex><span><span style=color:#e6db74>`</span>-------<span style=color:#960050;background-color:#1e0010>&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Serverless: <span style=color:#ae81ff>1</span> stages ------------------------------
</span></span><span style=display:flex><span>Serverless:     |_ dev <span style=color:#f92672>(</span><span style=color:#ae81ff>1</span> regions<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Serverless:         |_ us-east-1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Serverless: <span style=color:#ae81ff>0</span> functions --------------------------
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Serverless: SUMMARY -------------------------------
</span></span><span style=display:flex><span>Serverless: stages     : <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>Serverless: regions    : <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>Serverless: functions  : <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>Serverless: endpoints  : <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>Serverless: events     : <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><h2 id=function-の作成>function の作成</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ slss <span style=color:#66d9ef>function</span> create
</span></span><span style=display:flex><span>Serverless: Enter a new <span style=color:#66d9ef>function</span> name:  echo
</span></span><span style=display:flex><span>Serverless: Please, <span style=color:#66d9ef>select</span> a runtime <span style=color:#66d9ef>for</span> this new Function
</span></span><span style=display:flex><span>  &gt; nodejs
</span></span><span style=display:flex><span>    python2.7
</span></span><span style=display:flex><span>Serverless: For this new Function, would you like to create an Endpoint, Event, or just the Function?
</span></span><span style=display:flex><span>  &gt; Create Endpoint
</span></span><span style=display:flex><span>    Create Event
</span></span><span style=display:flex><span>    Just the Function...
</span></span><span style=display:flex><span>Serverless: Successfully created <span style=color:#66d9ef>function</span>: <span style=color:#e6db74>&#34;echo&#34;</span>
</span></span></code></pre></div><p>このエントリを作成する前は、v0.4.2 を利用していたのですが、component はなくなっているようです。</p><h3 id=function-echo-の実行>function echo の実行</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ slss <span style=color:#66d9ef>function</span> run echo
</span></span><span style=display:flex><span>Serverless: Running echo...
</span></span><span style=display:flex><span>Serverless: -----------------
</span></span><span style=display:flex><span>Serverless: Success! - This Response Was Returned:
</span></span><span style=display:flex><span>Serverless: <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Go Serverless! Your Lambda function executed successfully!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><code>./echo/handler.js</code> を変更すると、表示するメッセージは変えられるようです。</p><h3 id=function-echo-のデプロイ>function echo のデプロイ</h3><p>コスト節約のため、デプロイする前に、Lambda の MemorySize を変更します。
<code>./echo/s-function.json</code> を変更し、128MB に変更しました。</p><p>では、デプロイ。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ slss <span style=color:#66d9ef>function</span> deploy echo
</span></span><span style=display:flex><span>Serverless: Deploying functions in <span style=color:#e6db74>&#34;dev&#34;</span> to the following regions: us-east-1
</span></span><span style=display:flex><span>Serverless: ------------------------
</span></span><span style=display:flex><span>Serverless: Successfully deployed functions in <span style=color:#e6db74>&#34;dev&#34;</span> to the following regions:
</span></span><span style=display:flex><span>Serverless: us-east-1 ------------------------
</span></span><span style=display:flex><span>Serverless:   echo <span style=color:#f92672>(</span>slssHello-echo<span style=color:#f92672>)</span>: arn:aws:lambda:us-east-1:xxxx:function:slssHello-echo:dev
</span></span></code></pre></div><p>マネジメントコンソールをみると、function が作成されているのが確認できる。</p><p><img src=/posts/2016/started_serverless/0324_lambda.jpg alt="slssHello-echo が作成されている"></p><h2 id=api-gateway-にデプロイ>API Gateway にデプロイ</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ slss endpoint deploy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Serverless: Deploying endpoints in <span style=color:#e6db74>&#34;dev&#34;</span> to the following regions: us-east-1
</span></span><span style=display:flex><span>Serverless: Successfully deployed endpoints in <span style=color:#e6db74>&#34;dev&#34;</span> to the following regions:
</span></span><span style=display:flex><span>Serverless: us-east-1 ------------------------
</span></span><span style=display:flex><span>Serverless:   GET - echo - https://xxxx.execute-api.us-east-1.amazonaws.com/dev/echo
</span></span></code></pre></div><p>デプロイできました。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ curl -s <span style=color:#e6db74>&#34;https://xxxx.execute-api.us-east-1.amazonaws.com/dev/echo&#34;</span> | jq .
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Go Serverless! Your Lambda function executed successfully!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>curl で実行すると、メッセージが返ってきました。</p><p><img src=/posts/2016/started_serverless/0324_api_gateway.jpg alt="API Gatewayの設定値"></p><p>このように設定されています。</p><h2 id=まとめ>まとめ</h2><p>とりあえず、Lambda + API Gateway のAPI作成できました。
次は、定期的に Slack へメッセージ送信をやってみようと思います。</p><h3 id=今回作成したソース>今回作成したソース</h3><ul><li><a href=https://github.com/mizucopo/slssHello target=_blank>https://github.com/mizucopo/slssHello</a></li></ul></div></div></article><aside class="mt-12 pt-8" aria-labelledby=related-posts-heading><h2 id=related-posts-heading class="text-2xl sm:text-3xl font-bold text-slate-900 mb-6">関連記事</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" role=list><div class=flex role=listitem><article class="bg-white/60 backdrop-blur-sm shadow-lg rounded-xl border border-white/20 overflow-hidden mb-8 transition-all duration-300 hover:shadow-2xl hover:bg-white/80 hover:-translate-y-1"><div class=p-6><header class=mb-6><h1 class="font-bold text-slate-900 mb-2 tracking-wide" itemprop=headline><a href=/posts/2016/tried_to_install_sensuclient_on_raspberrypi_raspberian_but_failed/ class="hover:text-sky-600 transition-colors duration-300">RaspberryPi (Raspberian) に SensuClient を導入しようとしたが挫折</a></h1><div class="text-sm text-slate-500 mb-3 flex items-center flex-wrap"><time datetime=2016-03-21T23:29:00+09:00 class=mr-2 itemprop=datePublished><svg class="inline-block h-4 w-4 mr-1 -mt-0.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M6 2A1 1 0 005 3v1H4A2 2 0 002 6v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3A1 1 0 006 2zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/></svg>
<span class=sr-only>投稿日:</span>
2016年3月21日
</time><span class=mr-2><svg class="inline-block h-4 w-4 mr-1 -mt-0.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12A1 1 0 109 6v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.415L11 9.586V6z" clip-rule="evenodd"/></svg>
<span class=sr-only>読了時間:</span>
2 min read
</span><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fmizu.dev%2fposts%2f2016%2ftried_to_install_sensuclient_on_raspberrypi_raspberian_but_failed%2f&text=RaspberryPi%20%28Raspberian%29%20%e3%81%ab%20SensuClient%20%e3%82%92%e5%b0%8e%e5%85%a5%e3%81%97%e3%82%88%e3%81%86%e3%81%a8%e3%81%97%e3%81%9f%e3%81%8c%e6%8c%ab%e6%8a%98" target=_blank rel="noopener noreferrer" class="inline-flex items-center text-slate-500 hover:text-sky-600 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 rounded" aria-label=この記事をXで共有する><svg class="inline-block h-4 w-4 mr-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.257 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
<span class="hidden sm:inline">POST</span></a></div><div class="flex flex-wrap gap-2 mt-3" role=list aria-label=タグ><a href=/tags/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: サーバー">#サーバー
</a><a href=/tags/raspberrypi/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: RaspberryPi">#RaspberryPi
</a><a href=/tags/sensu/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: Sensu">#Sensu</a></div></header><div class="content-area max-w-none text-slate-600 mb-4"><p>Raspberry Pi を監視すべく、Sensu Client の導入をしてみたいと思います。</p><p>当然ながら、ARM版の Sensu はなく、自前でビルドする必要があります。
ビルドの方法は下記ページに記載しておりますが、最近だとDockerのコンテナでビルドするようです。</p></div><footer class=mt-4><a href=/posts/2016/tried_to_install_sensuclient_on_raspberrypi_raspberian_but_failed/ class="inline-flex items-center px-4 py-2 text-sky-600 font-semibold bg-gradient-to-r from-sky-50 to-blue-50 rounded-lg border border-sky-200/50 hover:from-sky-100 hover:to-blue-100 hover:text-sky-700 hover:border-sky-300 transition-all duration-300 group shadow-sm hover:shadow-md">続きを読む
<svg class="h-5 w-5 ml-1 group-hover:translate-x-1 transition-transform duration-300" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414.0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></a></footer></div></article></div><div class=flex role=listitem><article class="bg-white/60 backdrop-blur-sm shadow-lg rounded-xl border border-white/20 overflow-hidden mb-8 transition-all duration-300 hover:shadow-2xl hover:bg-white/80 hover:-translate-y-1"><div class=p-6><header class=mb-6><h1 class="font-bold text-slate-900 mb-2 tracking-wide" itemprop=headline><a href=/posts/2016/install_nokogiri_on_alpine_ruby_image/ class="hover:text-sky-600 transition-colors duration-300">Alpine の Ruby のイメージに nokogiri をインストール</a></h1><div class="text-sm text-slate-500 mb-3 flex items-center flex-wrap"><time datetime=2016-03-20T00:00:00+09:00 class=mr-2 itemprop=datePublished><svg class="inline-block h-4 w-4 mr-1 -mt-0.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M6 2A1 1 0 005 3v1H4A2 2 0 002 6v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3A1 1 0 006 2zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/></svg>
<span class=sr-only>投稿日:</span>
2016年3月20日
</time><span class=mr-2><svg class="inline-block h-4 w-4 mr-1 -mt-0.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12A1 1 0 109 6v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.415L11 9.586V6z" clip-rule="evenodd"/></svg>
<span class=sr-only>読了時間:</span>
2 min read
</span><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fmizu.dev%2fposts%2f2016%2finstall_nokogiri_on_alpine_ruby_image%2f&text=Alpine%20%e3%81%ae%20Ruby%20%e3%81%ae%e3%82%a4%e3%83%a1%e3%83%bc%e3%82%b8%e3%81%ab%20nokogiri%20%e3%82%92%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab" target=_blank rel="noopener noreferrer" class="inline-flex items-center text-slate-500 hover:text-sky-600 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 rounded" aria-label=この記事をXで共有する><svg class="inline-block h-4 w-4 mr-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.257 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
<span class="hidden sm:inline">POST</span></a></div><div class="flex flex-wrap gap-2 mt-3" role=list aria-label=タグ><a href=/tags/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: サーバー">#サーバー
</a><a href=/tags/docker/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: Docker">#Docker
</a><a href=/tags/ruby/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: Ruby">#Ruby</a></div></header><div class="content-area max-w-none text-slate-600 mb-4"><p>公式のAlpineのRubyイメージに、nokogiriをインストールをエラーになるので、それの対応方法。</p></div><footer class=mt-4><a href=/posts/2016/install_nokogiri_on_alpine_ruby_image/ class="inline-flex items-center px-4 py-2 text-sky-600 font-semibold bg-gradient-to-r from-sky-50 to-blue-50 rounded-lg border border-sky-200/50 hover:from-sky-100 hover:to-blue-100 hover:text-sky-700 hover:border-sky-300 transition-all duration-300 group shadow-sm hover:shadow-md">続きを読む
<svg class="h-5 w-5 ml-1 group-hover:translate-x-1 transition-transform duration-300" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414.0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></a></footer></div></article></div><div class=flex role=listitem><article class="bg-white/60 backdrop-blur-sm shadow-lg rounded-xl border border-white/20 overflow-hidden mb-8 transition-all duration-300 hover:shadow-2xl hover:bg-white/80 hover:-translate-y-1"><div class=p-6><header class=mb-6><h1 class="font-bold text-slate-900 mb-2 tracking-wide" itemprop=headline><a href=/posts/2016/file_server_using_dropbox/ class="hover:text-sky-600 transition-colors duration-300">Dropboxを利用したファイルサーバー</a></h1><div class="text-sm text-slate-500 mb-3 flex items-center flex-wrap"><time datetime=2016-03-01T00:00:00+09:00 class=mr-2 itemprop=datePublished><svg class="inline-block h-4 w-4 mr-1 -mt-0.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M6 2A1 1 0 005 3v1H4A2 2 0 002 6v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3A1 1 0 006 2zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/></svg>
<span class=sr-only>投稿日:</span>
2016年3月1日
</time><span class=mr-2><svg class="inline-block h-4 w-4 mr-1 -mt-0.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12A1 1 0 109 6v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.415L11 9.586V6z" clip-rule="evenodd"/></svg>
<span class=sr-only>読了時間:</span>
3 min read
</span><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fmizu.dev%2fposts%2f2016%2ffile_server_using_dropbox%2f&text=Dropbox%e3%82%92%e5%88%a9%e7%94%a8%e3%81%97%e3%81%9f%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%82%b5%e3%83%bc%e3%83%90%e3%83%bc" target=_blank rel="noopener noreferrer" class="inline-flex items-center text-slate-500 hover:text-sky-600 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 rounded" aria-label=この記事をXで共有する><svg class="inline-block h-4 w-4 mr-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.257 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
<span class="hidden sm:inline">POST</span></a></div><div class="flex flex-wrap gap-2 mt-3" role=list aria-label=タグ><a href=/tags/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: サーバー">#サーバー
</a><a href=/tags/windows/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: Windows">#Windows
</a><a href=/tags/dropbox/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: Dropbox">#Dropbox
</a><a href=/tags/chuwi-hi8/ class="px-3 py-1 text-xs font-medium bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 rounded-full border border-sky-200/50 hover:from-sky-200 hover:to-blue-200 hover:text-sky-800 hover:border-sky-300 transition-all duration-300 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2" role=listitem aria-label="タグ: CHUWI Hi8">#CHUWI Hi8</a></div></header><figure class="my-4 rounded-xl overflow-hidden"><a href=/posts/2016/file_server_using_dropbox/><img src=/posts/2016/file_server_using_dropbox/0301hi8_hu_7074c444df32cce4.webp alt="Cover image for Dropboxを利用したファイルサーバー" class="w-full h-auto object-cover transition-transform duration-300 hover:scale-105" loading=lazy decoding=async width=400 height=300></a></figure><div class="content-area max-w-none text-slate-600 mb-4"><p>普段、Dropbox Proを利用しています。
バックアップもでき、ファイルアクセスも容易となかなかに便利です。
Pro版だと1TB利用でき良いのですが、SSDとの相性が悪いです。
全て同期したいのですが、ディスクの容量が足りません。</p></div><footer class=mt-4><a href=/posts/2016/file_server_using_dropbox/ class="inline-flex items-center px-4 py-2 text-sky-600 font-semibold bg-gradient-to-r from-sky-50 to-blue-50 rounded-lg border border-sky-200/50 hover:from-sky-100 hover:to-blue-100 hover:text-sky-700 hover:border-sky-300 transition-all duration-300 group shadow-sm hover:shadow-md">続きを読む
<svg class="h-5 w-5 ml-1 group-hover:translate-x-1 transition-transform duration-300" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414.0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></a></footer></div></article></div></div></aside></main><footer class="py-8 text-center bg-slate-200 text-slate-600"><div class="container px-4 mx-auto sm:px-6 lg:px-8"><p class=text-sm>&copy; 2025 みず ねっとわーくさーびす.</p></div></footer><script src=/js/main.min.8d376239115d41898b52d8d69d098f6ede74f4321062c27915daaf1abd1f23bf.js defer></script></body></html>